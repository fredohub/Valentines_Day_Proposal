<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Valentine Proposal</title>

<link rel="stylesheet" href="./Styles/styles.css">
<link rel="stylesheet" href="./Styles/yes.css">

<!-- Load confetti library early -->
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<!-- Immediate confetti script -->
<script>
  // This runs immediately, even while page is rendering
  document.addEventListener("DOMContentLoaded", () => {
    const yesButton = document.getElementById('yesButton');
    if (yesButton) {
      yesButton.addEventListener('click', () => {
        const pop = document.getElementById('popSound');
        const sparkle = document.getElementById('sparkleSound');

        if (pop) pop.volume = 0.7; pop.play().catch(() => {});
        setTimeout(() => { if (sparkle) sparkle.volume = 0.5; sparkle.play().catch(() => {}); }, 400);

        const duration = 3000;
        const end = Date.now() + duration;
        const myConfetti = confetti.create(null, { resize: true });

        (function frame() {
          myConfetti({
            particleCount: 5,
            angle: 60,
            spread: 55,
            origin: { x: 0 },
            colors: ['#FFC0CB','#FF69B4','#FF1493','#FAF9F6']
          });
          myConfetti({
            particleCount: 5,
            angle: 120,
            spread: 55,
            origin: { x: 1 },
            colors: ['#FFC0CB','#FF69B4','#FF1493','#FAF9F6']
          });
          if (Date.now() < end) requestAnimationFrame(frame);
        })();

        // Redirect after confetti
        setTimeout(() => { window.location.href = "yes.html"; }, duration);
      });
    }
  });

  // No button movement
  function moveButton() {
    const noBtn = document.getElementById('noButton');
    const x = Math.random() * (window.innerWidth - noBtn.offsetWidth);
    const y = Math.random() * (window.innerHeight - noBtn.offsetHeight);
    noBtn.style.left = `${x}px`;
    noBtn.style.top = `${y}px`;
  }
</script>
</head>
<body>

<div class="container">
    <h1 class="header_text">Will you be my valentine 14?</h1>

    <div class="gif_container">
        <img src="https://64.media.tumblr.com/44437aaa3af65ef5b5dc25b2cf1e81d1/6acc7d78ea83e207-45/s400x600/5b30035952803850ed3136fbe760ceff97ee8d19.gif" 
             alt="Cute animated illustration">
    </div>

    <div class="buttons">
        <button class="btn" id="yesButton">Yes</button>
        <button class="btn" id="noButton" onmouseover="moveButton()">No</button>
    </div>

    <p class="made-with-love">
        Made with love and a sprinkle of creativity by Adi ðŸ’–âœ¨.
    </p>
</div>

<!-- Audio elements -->
<audio id="popSound" preload="auto">
    <source src="https://assets.mixkit.co/sfx/preview/mixkit-quick-win-video-game-notification-269.mp3" type="audio/mpeg">
</audio>

<audio id="sparkleSound" preload="auto">
    <source src="https://assets.mixkit.co/sfx/preview/mixkit-magical-coin-win-1936.mp3" type="audio/mpeg">
</audio>

</body>
</html>